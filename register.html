<!DOCTYPE html>
<html class="light" lang="th">
<head>
    <meta charset="utf-8" />
    <title>สมัครสมาชิก</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="assets/js/tailwind-config.js"></script>
</head>
<body class="bg-gray-50 min-h-screen flex items-center justify-center p-4">
    
    <div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-2xl">
        <h1 class="text-2xl font-bold mb-6 text-center">สมัครสมาชิกใหม่</h1>
        
        <form id="reg-form" class="space-y-6">
            <!-- Account Info -->
            <div class="grid md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">ชื่อผู้ใช้ (Username)</label>
                    <input type="text" id="username" class="w-full border p-2 rounded bg-gray-50" required>
                </div>
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">รหัสผ่าน (Password)</label>
                    <input type="password" id="password" class="w-full border p-2 rounded bg-gray-50" required>
                </div>
            </div>

            <!-- Personal Info -->
            <div class="grid md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">ชื่อ (First Name)</label>
                    <input type="text" id="name" class="w-full border p-2 rounded" required>
                </div>
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">นามสกุล (Last Name)</label>
                    <input type="text" id="surname" class="w-full border p-2 rounded" required>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">อีเมล (Email)</label>
                    <input type="email" id="email" class="w-full border p-2 rounded" required>
                </div>
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">เบอร์โทรศัพท์ (Phone)</label>
                    <input type="tel" id="phone" class="w-full border p-2 rounded" required>
                </div>
            </div>

            <!-- Address -->
            <div>
                <label class="block text-sm font-bold text-gray-700 mb-1">ที่อยู่จัดส่ง (Shipping Address)</label>
                <textarea id="address" rows="3" class="w-full border p-2 rounded" placeholder="บ้านเลขที่, ถนน, แขวง/ตำบล, เขต/อำเภอ, จังหวัด, รหัสไปรษณีย์" required></textarea>
            </div>

            <button type="submit" class="w-full bg-black text-white py-3 rounded font-bold hover:bg-gray-800 transition">ยืนยันการสมัคร</button>
        </form>

        <p class="text-center mt-4 text-sm">มีบัญชีแล้ว? <a href="login.html" class="text-blue-600 underline">เข้าสู่ระบบ</a></p>
    </div>

    <script type="module">
        import { registerUser } from './assets/js/auth-utils.js';

        document.getElementById('reg-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const data = {
                username: document.getElementById('username').value,
                password: document.getElementById('password').value,
                name: document.getElementById('name').value + ' ' + document.getElementById('surname').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                address: document.getElementById('address').value
            };

            try {
                await registerUser(data);
                alert('✅ สมัครสมาชิกสำเร็จ! กรุณาเข้าสู่ระบบ');
                window.location.href = 'login.html';
            } catch (err) {
                alert('❌ เกิดข้อผิดพลาด: ' + err.message);
            }
        });
    </script>
</body>
</html>